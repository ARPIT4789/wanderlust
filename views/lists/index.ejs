<% layout("/layouts/boilerplate")%>
  
  <div id="filters">
    <a href="/listings?category=Trending">
      <div class="filter">
        <div>
          <i class="fa-solid fa-fire"></i>
        </div>
        <p>Trending</p>
      </div>
    </a>
    <a href="/listings?category=Rooms">
      <div class="filter">
        <div>
          <i class="fa-solid fa-bed"></i>
        </div>
        <p>Rooms</p>
      </div>
    </a>
    <a href="/listings?category=Iconic Cities">
      <div class="filter">
        <div>
          <i class="fa-solid fa-mountain-city"></i>
        </div>
        <p>Iconic Cities</p>
      </div>
    </a>
    <a href="/listings?category=Mountains">
      <div class="filter">
        <div>
          <i class="fa-solid fa-mountain"></i>
        </div>
        <p>Mountains</p>
      </div>
    </a>
    <a href="/listings?category=Castles">
      <div class="filter">
        <div>
          <i class="fa-brands fa-fort-awesome"></i>
        </div>
        <p>Castles</p>
      </div>
    </a>
    <a href="/listings?category=Amazing Pools">
      <div class="filter">
        <div>
          <i class="fa-solid fa-person-swimming"></i>
        </div>
        <p>Amazing Pools</p>
      </div>
    </a>
    <a href="/listings?category=Farms">
      <div class="filter">
        <div>
          <i class="fa-solid fa-tractor"></i>
        </div>
        <p>Farms</p>
      </div>
    </a>
    <a href="/listings?category=Camping">
      <div class="filter">
        <div>
          <i class="fa-solid fa-campground"></i>
        </div>
        <p>Camping</p>
      </div>
    </a>
    <a href="/listings?category=Arctic">
      <div class="filter">
        <div>
          <i class="fa-brands fa-galactic-republic"></i>
        </div>
        <p>Arctic</p>
      </div>
    </a>

    <div class="toggle-tax">
      <div class="form-check-reverse form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
        <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
      </div>
    </div>
  </div>
  <div class="row g-3">

    <% if (listings.length===0) { %>
      <p class="fs-3 mx-auto my-3 text-danger">No listings found.</p>
      <% } %>


        <%for(let listing of listings){ %>
          <div class="col-12 col-sm-6 col-lg-3">
            <a href="/listings/<%= listing._id %>" class="Listing_link d-block h-100">
              <div class="card card-listing h-100">
                <img src="<%=listing.image.url%>" class="card-img-top listing-img" alt="image">
                <div class="card-img-overlay"></div>
                <div class="card-body">
                  <p class="card-text">
                    <b>
                      <%= listing.title%>
                    </b><br>
                    &#8377;<%=listing.price.toLocaleString("en-IN")%>/Night
                      <i class="tax-infos">&nbsp&nbsp+18% GST</i>
                  </p>
                </div>
              </div>
            </a>
          </div>
          <%}%>
  </div>

  <script>
    let taxSwitch = document.getElementById("switchCheckDefault")
    taxSwitch.addEventListener("click", () => {
      let infos = document.getElementsByClassName("tax-infos")
      for (info of infos) {
        if (info.style.display != "inline") {
          info.style.display = "inline"
        } else {
          info.style.display = "none"
        }
      }
    })
  </script>
